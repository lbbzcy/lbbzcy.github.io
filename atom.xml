<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>天道酬勤</title>
  
  <subtitle>不忘初心</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://lbbzcy.github.io/"/>
  <updated>2019-01-24T08:40:00.990Z</updated>
  <id>https://lbbzcy.github.io/</id>
  
  <author>
    <name>zhucy</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Linux查看系统配置参数命令</title>
    <link href="https://lbbzcy.github.io/2019/01/24/Linux%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0%E5%91%BD%E4%BB%A4/"/>
    <id>https://lbbzcy.github.io/2019/01/24/Linux查看系统配置参数命令/</id>
    <published>2019-01-24T08:39:35.000Z</published>
    <updated>2019-01-24T08:40:00.990Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">1. uname -a # 查看内核/操作系统/CPU信息的linux系统信息  </span><br><span class="line">2. head -n l /etc/issue # 查看操作系统版本  </span><br><span class="line">3. cat /proc/cpuinfo # 查看CPU信息  </span><br><span class="line">4. hostname # 查看计算机名的linux系统信息命令  </span><br><span class="line">5. lspci -tv # 列出所有PCI设备   </span><br><span class="line">6. lsusb -tv # 列出所有USB设备的linux系统信息命令  </span><br><span class="line">7. lsmod # 列出加载的内核模块   </span><br><span class="line">8. env # 查看环境变量资源  </span><br><span class="line">9. free -m # 查看内存使用量和交换区使用量   </span><br><span class="line">10. df -h # 查看各分区使用情况  </span><br><span class="line">11. du -sh # 查看指定目录的大小   </span><br><span class="line">12. grep MemTotal /proc/meminfo # 查看内存总量  </span><br><span class="line">13. grep MemFree /proc/meminfo # 查看空闲内存量   </span><br><span class="line">14. uptime # 查看系统运行时间、用户数、负载  </span><br><span class="line">15. cat /proc/loadavg # 查看系统负载磁盘和分区   </span><br><span class="line">16. mount | column -t # 查看挂接的分区状态  </span><br><span class="line">17. fdisk -l # 查看所有分区   </span><br><span class="line">18. swapon -s # 查看所有交换分区  </span><br><span class="line">19. hdparm -i /dev/hda # 查看磁盘参数(仅适用于IDE设备)   </span><br><span class="line">20. dmesg | grep IDE # 查看启动时IDE设备检测状况网络  </span><br><span class="line">21. ifconfig # 查看所有网络接口的属性   </span><br><span class="line">22. iptables -L # 查看防火墙设置  </span><br><span class="line">23. route -n # 查看路由表   </span><br><span class="line">24. netstat -lntp # 查看所有监听端口  </span><br><span class="line">25. netstat -antp # 查看所有已经建立的连接   </span><br><span class="line">26. netstat -s # 查看网络统计信息进程  </span><br><span class="line">27. ps -ef # 查看所有进程   </span><br><span class="line">28. top # 实时显示进程状态用户  </span><br><span class="line">29. w # 查看活动用户   </span><br><span class="line">30. id # 查看指定用户信息  </span><br><span class="line">31. last # 查看用户登录日志   </span><br><span class="line">32. cut -d: -f1 /etc/passwd # 查看系统所有用户  </span><br><span class="line">33. cut -d: -f1 /etc/group # 查看系统所有组   </span><br><span class="line">34. crontab -l # 查看当前用户的计划任务服务  </span><br><span class="line">35. chkconfig –list # 列出所有系统服务   </span><br><span class="line">36. chkconfig –list | grep on # 列出所有启动的系统服务程序  </span><br><span class="line">37. rpm -qa # 查看所有安装的软件包   </span><br><span class="line">38. cat /proc/cpuinfo ：查看CPU相关参数的linux系统命令  </span><br><span class="line">39. cat /proc/partitions ：查看linux硬盘和分区信息的系统信息命令   </span><br><span class="line">40. cat /proc/meminfo ：查看linux系统内存信息的linux系统命令  </span><br><span class="line">41. cat /proc/version ：查看版本，类似uname -r   </span><br><span class="line">42. cat /proc/ioports ：查看设备io端口  </span><br><span class="line">43. cat /proc/interrupts ：查看中断   </span><br><span class="line">44. cat /proc/pci ：查看pci设备的信息  </span><br><span class="line">45. cat /proc/swaps ：查看所有swap分区的信息</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class
      
    
    </summary>
    
    
      <category term="Linux" scheme="https://lbbzcy.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>gitlab搭建</title>
    <link href="https://lbbzcy.github.io/2019/01/24/gitlab%E6%90%AD%E5%BB%BA/"/>
    <id>https://lbbzcy.github.io/2019/01/24/gitlab搭建/</id>
    <published>2019-01-24T08:32:26.000Z</published>
    <updated>2019-01-24T09:27:50.489Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>配置yum源<br>vim /etc/yum.repos.d/gitlab-ce.repo</p><p>复制以下内容：</p><p> [gitlab-ce]</p><p>name=Gitlab CE Repository</p><p>baseurl=<a href="https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el$releasever/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el$releasever/</a></p><p>gpgcheck=0</p><p>enabled=1</p></li><li><p>更新本地yum缓存</p><p>sudo yum makecache</p></li><li><p>安装GitLab社区版</p><p>sudo yum install gitlab-ce        #自动安装最新版<br>sudo yum install gitlab-ce-x.x.x    #安装指定版本</p></li><li><p>GitLab常用命令</p><p>sudo gitlab-ctl start    # 启动所有 gitlab 组件；<br>sudo gitlab-ctl stop        # 停止所有 gitlab 组件；<br>sudo gitlab-ctl restart        # 重启所有 gitlab 组件；<br>sudo gitlab-ctl status        # 查看服务状态；<br>sudo gitlab-ctl reconfigure        # 启动服务；<br>sudo vim /etc/gitlab/gitlab.rb        # 修改默认的配置文件；<br>gitlab-rake gitlab:check SANITIZE=true –trace    # 检查gitlab；<br>sudo gitlab-ctl tail        # 查看日志；</p><p>安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl -fsSL get.docker.com -o get-docker.sh #下载get-docker.sh文件</span><br><span class="line">$ sudo sh get-docker.sh --mirror Aliyun #以阿里云镜像安装get-docker.sh脚本内容</span><br></pre></td></tr></table></figure><hr><p>调优：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl enable docker #开机启动docker</span><br><span class="line">$ sudo systemctl start docker #启动docker</span><br><span class="line">$ sudo groupadd docker #建立docker组</span><br><span class="line">$ sudo usermod -aG docker $USER #将当前用户加入 docker 组</span><br><span class="line">$ sudo vim /etc/systemd/system/multi-user.target.wants/docker.service #添加下面仓库地址到此文件</span><br><span class="line">ExecStart=/usr/bin/dockerd --registry-mirror=https://ckq4qobq.mirror.aliyuncs.com  #使用阿里云加速</span><br><span class="line">$ sudo systemctl daemon-reload #重新加载daemon</span><br><span class="line">$ sudo systemctl restart docker  #重启docker</span><br></pre></td></tr></table></figure><p>验证：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker run --name webserver -d -p</span><br><span class="line">81:80 nginx </span><br><span class="line"><span class="meta">#</span>docker从仓库pull下nginx镜像并命名为webserver，此镜像以后台模式，81端口映射宿主机80端口运行</span><br><span class="line"><span class="meta">#</span>如果下载速度较慢，可能国内镜像加速未成功。</span><br><span class="line"><span class="meta">$</span> firefox #打开firefox浏览器</span><br><span class="line"><span class="meta">#</span>输入  localhost：81  看到nginx欢迎界面表示搭建成功</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;&lt;p&gt;配置yum源&lt;br&gt;vim /etc/yum.repos.d/gitlab-ce.repo&lt;/p&gt;
&lt;p&gt;复制以下内容：&lt;/p&gt;
&lt;p&gt; [gitlab-ce]&lt;/p&gt;
&lt;p&gt;name=Gitlab CE Repository&lt;/p&gt;
&lt;p&gt;baseurl
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>centos7安装Docker</title>
    <link href="https://lbbzcy.github.io/2019/01/24/centos7%E5%AE%89%E8%A3%85Docker/"/>
    <id>https://lbbzcy.github.io/2019/01/24/centos7安装Docker/</id>
    <published>2019-01-24T08:28:56.000Z</published>
    <updated>2019-01-24T08:33:37.742Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>Docker版本 : </p><ul><li>社区版（CE）:Docker Community Edition（CE）非常适合希望开始使用Docker并尝试使用基于容器的应用程序的个人开发人员和小型团队。</li><li>企业版（EE）: Docker企业版（EE）专为企业开发和IT团队而设计，他们可以在生产中大规模构建，发布和运行业务关键型应用程序。</li></ul></li><li><p>Docker安装方式：</p><p>安装之前需要卸载旧版本 </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-selinux \</span><br><span class="line">                  docker-engine-selinux \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure><ul><li><p>使用存储库安装</p><ul><li><p>设置存储库</p><ul><li><p>安装所需的包。<code>yum-utils</code>提供了<code>yum-config-manager</code> 效用，并<code>device-mapper-persistent-data</code>和<code>lvm2</code>由需要 <code>devicemapper</code>存储驱动程序。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo yum install -y yum-utils \</span><br><span class="line">  device-mapper-persistent-data \</span><br><span class="line">  lvm2</span><br></pre></td></tr></table></figure></li><li><p>使用以下命令设置稳定存储库。即使您还想从边缘或测试存储库安装构建，您始终需要稳定的存储 库。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure></li><li><p>可选：启用边缘和测试存储库。这些存储库包含在docker.repo上面的文件中，但默认情况下处于禁用状态。您可以将它们与稳定存储库一起启用。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo yum-config-manager --enable docker-ce-edge</span><br><span class="line"><span class="meta">$</span> sudo yum-config-manager --enable docker-ce-test</span><br></pre></td></tr></table></figure></li></ul></li><li><p>设置存储库</p><ol><li><p>安装最新版本的Docker CE，或转到下一步安装特定版本：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo yum install docker-ce</span><br></pre></td></tr></table></figure></li><li><p>要安装特定版本的Docker CE，请列出repo中的可用版本，然后选择并安装：</p><p>一个。列出并对您的仓库中可用的版本进行排序。此示例按版本号对结果进行排序，从最高到最低，并被截断</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> yum list docker-ce --showduplicates | sort -r</span><br><span class="line">docker-ce.x86_64            18.03.0.ce-1.el7.centos             docker-ce-stable</span><br><span class="line"><span class="meta">$</span> sudo yum install docker-ce-&lt;VERSION STRING&gt;</span><br></pre></td></tr></table></figure></li><li><p>尚未启动。该docker组已创建，但没有用户添加到该组。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo systemctl start docker</span><br></pre></td></tr></table></figure></li></ol></li></ul></li><li><p>从包安装</p><ol><li><p>转到 <a href="https://download.docker.com/linux/centos/7/x86_64/stable/Packages/" target="_blank" rel="noopener">https://download.docker.com/linux/centos/7/x86_64/stable/Packages/</a> 并下载.rpm要安装的Docker版本的文件。</p></li><li><p>安装Docker CE，将下面的路径更改为您下载Docker软件包的路径。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install /path/to/package.rpm</span><br></pre></td></tr></table></figure><p>Docker已安装但尚未启动。该docker组已创建，但没有用户添加到该组。</p></li><li><p>启动Docker。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo systemctl start docker</span><br></pre></td></tr></table></figure></li><li><p>docker通过运行hello-world 映像验证是否已正确安装。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker run hello-world</span><br></pre></td></tr></table></figure></li></ol></li><li><p>使用便利脚本安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line"><span class="meta">$</span> sudo sh get-docker.sh</span><br><span class="line"></span><br><span class="line">&lt;output truncated&gt;</span><br><span class="line"></span><br><span class="line">If you would like to use Docker as a non-root user, you should now consider</span><br><span class="line">adding your user to the "docker" group with something like:</span><br><span class="line"></span><br><span class="line">  sudo usermod -aG docker your-user</span><br><span class="line"></span><br><span class="line">Remember to log out and back in for this to take effect!</span><br><span class="line"></span><br><span class="line">WARNING: Adding a user to the "docker" group grants the ability to run</span><br><span class="line">         containers which can be used to obtain root privileges on the</span><br><span class="line">         docker host.</span><br><span class="line">         Refer to https://docs.docker.com/engine/security/security/#docker-daemon-attack-surface</span><br><span class="line">         for more information.</span><br></pre></td></tr></table></figure></li><li><p>卸载Docker CE</p><ul><li><p>卸载Docker包：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo yum remove docker-ce</span><br></pre></td></tr></table></figure></li><li><p>主机上的图像，容器，卷或自定义配置文件不会自动删除。要删除所有图像，容器和卷：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo rm -rf /var/lib/docker</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;&lt;p&gt;Docker版本 : &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;社区版（CE）:Docker Community Edition（CE）非常适合希望开始使用Docker并尝试使用基于容器的应用程序的个人开发人员和小型团队。&lt;/li&gt;
&lt;li&gt;企业版（EE）: Docke
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>oninstack安装</title>
    <link href="https://lbbzcy.github.io/2019/01/24/oninstack%E5%AE%89%E8%A3%85/"/>
    <id>https://lbbzcy.github.io/2019/01/24/oninstack安装/</id>
    <published>2019-01-24T08:07:11.000Z</published>
    <updated>2019-01-24T08:26:27.646Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p><strong>linux 命令</strong></p><ul><li>修改主机名： vi /etc/hostname</li><li>scp wfxAdmin.war <a href="mailto:root@39.104.48.138" target="_blank" rel="noopener">root@39.104.48.138</a>:/hnccnet/tomcat/cpsServer/webapps</li><li>mv 重命名</li><li>cp-r /www /aa 复制文件夹</li><li>chown -R www:www  XXX</li><li>jar-xvf  xxx.war xxx </li></ul></li><li><p>iptables</p><ul><li>关闭iptables service iptables stop  </li><li>查看iptables iptables -nvL  cat/etc/sysconfig/iptables</li><li>ptables -I INPUT 4 -p tcp -m state –state NEW -m tcp –dport 3306 -jACCEPT</li><li>service iptables save #保存iptables规则</li></ul></li><li><p>nginx.conf 配置</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">root</span> /data/wwwroot/default;</span><br><span class="line"><span class="attribute">index</span> index.html index.jsp; </span><br><span class="line"><span class="attribute">location</span> / &#123;</span><br><span class="line">  <span class="attribute">proxy_pass</span> http://lbbzcy.xin;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>mysql 命令</p><ul><li>mysql -uroot -p</li><li>source ***.sql</li><li>grant all privileges on 数据库.* to 用户@’%’ identified by ‘密码’;#授权语句，特别注意有分号</li><li>flush privileges;</li></ul></li><li><p>tomcat   tomcat  server.xml  vhost/localhost.xml      </p></li></ol><p>​    </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;linux 命令&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;修改主机名： vi /etc/hostname&lt;/li&gt;
&lt;li&gt;scp wfxAdmin.war &lt;a href=&quot;mailto:root@39.104.48.138&quot; tar
      
    
    </summary>
    
    
      <category term="Linux" scheme="https://lbbzcy.github.io/tags/Linux/"/>
    
  </entry>
  
</feed>
